# Load the shared TSIG key for DNS updates
include "/etc/dhcp/ddns.key";

# Enable DDNS update mechanism
ddns-update-style interim;
ddns-domainname "drodcab.es.";
ddns-rev-domainname "58.168.192.in-addr.arpa.";

subnet 192.168.58.0 netmask 255.255.255.0 {

    # IP pool for DHCP clients
    range 192.168.58.100 192.168.58.200;

    # Default gateway (not used here but required)
    option routers 192.168.58.1;

    # DNS server address
    option domain-name-servers 192.168.58.10;

    # Domain name for DHCP clients
    option domain-name "drodcab.es";

    # Forward zone for dynamic updates
    zone drodcab.es. {
        primary 192.168.58.10;
        key "ddns-key";
    }

    # Reverse zone for dynamic updates
    zone 58.168.192.in-addr.arpa. {
        primary 192.168.58.10;
        key "ddns-key";
    }
}